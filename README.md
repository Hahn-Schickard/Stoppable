<img src="docs/images/vendor-logo.png" alt="" width="200"/>

# Stoppable
## Description
A header only implementation of a utility classes that help develop multi-threaded code, requires std::thread library and C++11 support.

### Contains:
 * `Stoppable` - A class that provides functionality to start and stop a given routine
 * `StoppableTask` - A class that manages `Stoppable` in a separate thread
 * `JobHandler` - A class that cleans up allocated `std::future` instances from `std::async` calls.

## Documentation
If you want to have the latest documentation with your changes locally, you can generate it with [Doxygen](https://github.com/doxygen/doxygen) from sources by running the following:

```bash
doxygen Doxyfile
```

This will generate html like documentation at `[PROJECT_ROOT]/docs/code_documentation/html`. To use it open the `[PROJECT_ROOT]/docs/code_documentation/html/index.html` file with your browser.

## Dependencies
### Required

* cmake - build system generator
* python3 - used by utilities
* conan - dependency handler, see [SSO Wiki](https://ssowiki.hsg.privat/en/Softwareentwicklung/Cpp/Conan_Package_Manager) for installation

### Optional

* clang-format - to use formatting tools
* clang-tidy - to use static code analysis
* doxygen - to generate documentation from code

## Visual Studio Code Support

### Recommended Plugins:

* [C/C++](https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools)  - provides linking to *inellisense*  and code debuggers
* [C++ Intellisense](https://marketplace.visualstudio.com/items?itemName=austin.code-gnu-global) - provides code highlighting and quick navigation
* [CMake Tools](https://marketplace.visualstudio.com/items?itemName=ms-vscode.cmake-tools) - provides CMake highlighting, configuring, building
* [Clang-Format](https://marketplace.visualstudio.com/items?itemName=xaver.clang-format) - provides code formatting
* [Test Explorer UI](https://marketplace.visualstudio.com/items?itemName=hbenl.vscode-test-explorer) - provides test runner integration
* [C++ TestMate](https://marketplace.visualstudio.com/items?itemName=matepek.vscode-catch2-test-adapter) - provides google-test framework adapter for Test Explorer UI
* [Doxygen Documentation Generator](https://marketplace.visualstudio.com/items?itemName=cschlosser.doxdocgen) - provides autogenerated doxygen documentation stubs
* [Code Spell Checker](https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker) - provides english text spellchecker functionality

## Building the project

To build the project [CMake](https://cmake.org/) project makefile generation as well as integrated testing and linting tools.

We recommend to create a directory for project makefiles and binaries:

```bash
mkdir build && cd build
```

Once in this new **build** directory, generate the project makefiles:

```bash
cmake ..
```

Once makefiles have been generated, build the project either in **Debug** configuration:

```bash
cmake --build . --target all --config Debug --
```

or **Release** configuration:

```bash
cmake --build . --target all --config Release --
```

Once the project is built, it is also possible to use the integrated tests runner to run the provided tests:

```bash
ctest --verbose
```

## Project utility tools

This project comes with integrated utility scripts written in python3 to check code coverage with **gcov** and **lcov**, check for memory leaks with **valgrind** and generate documentation with **Doxygen**. You can use these by running the following:

* `python3 utility/run-lcov.py --help` - to learn how to use **lcov** wrapper
* `python3 utility/run-valgrind.py --help` - to learn how to use **valgrind** wrapper
* `python3 utility/run-clang-tidy.py --help` - to learn how to use **run-clang-tidy** wrapper
* `python3 utility/run-clang-format.py --help` - to learn how to use **run-clang-format** wrapper

Hidden files and scripts within utility directory are used by CI/CD pipeline or as configuration files for the wrappers.

This directory is typically maintained via [Project-Configurator](https://git.hahn-schickard.de/hahn-schickard/software-sollutions/application-engineering/internal/project-configurator) program and SHOULD not be modified manually. Any modifications SHOULD be done in [Project Template](https://git.hahn-schickard.de/hahn-schickard/software-sollutions/application-engineering/internal/project-template/-/tree/cpp) repository instead and updated via [Project-Configurator](https://git.hahn-schickard.de/hahn-schickard/software-sollutions/application-engineering/internal/project-configurator) once released.
